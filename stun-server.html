
function createPeerConnection(callback, namespace) {
  log(namespace, 'Creating peer connection without STUN server');
  const conn = new RTCPeerConnection();
  conn.onicecandidate = (event) => {
    if (!event.candidate) {
      log(namespace, 'ICE candidate gathering complete');
      callback();
      return;
    }
    log(namespace, 'New ICE candidate:', event.candidate);
  };
  conn.onconnectionstatechange = (event) => {
    log(namespace, 'Connection state change: <b>', conn.connectionState, "</b>");
  };
  conn.oniceconnectionstatechange = (event) => {
    log(namespace, 'ICE connection state change: <b>', conn.iceConnectionState, "</b>");
  };
  return conn;
}